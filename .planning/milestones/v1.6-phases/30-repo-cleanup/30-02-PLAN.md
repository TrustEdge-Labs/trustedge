---
phase: 30-repo-cleanup
plan: 02
type: execute
wave: 2
depends_on: [30-01]
files_modified:
  - CLAUDE.md
  - DEPENDENCIES.md
  - .planning/STATE.md
  - .planning/REQUIREMENTS.md
  - .planning/PROJECT.md
autonomous: true
requirements: [REPO-02, REPO-03]

must_haves:
  truths:
    - "CLAUDE.md contains no references to any of the 11 deleted repos"
    - "CLAUDE.md accurately describes the TrustEdge-Labs org as having 3 repos"
    - "No .md file in the repo references deleted repos as if they still exist"
  artifacts:
    - path: "CLAUDE.md"
      provides: "Updated architecture docs without stale repo references"
      contains: "3 repos"
    - path: "DEPENDENCIES.md"
      provides: "Updated dependency docs without stale repo references"
  key_links:
    - from: "CLAUDE.md"
      to: "GitHub org"
      via: "repo references"
      pattern: "trustedge.*trustedgelabs-website.*shipsecure"
---

<objective>
Update all documentation to remove references to deleted repos and accurately describe the 3-repo org structure.

Purpose: After repo deletions in Plan 01, documentation still references archived/deleted repos. CLAUDE.md has an "Archived Service Repos" section that must be removed entirely. Other docs reference trustedge-dashboard, trustedge-platform-api, trustedge-verify-core, and trustedge-shared-libs as if they still exist externally. All stale references must be scrubbed.

Output: Clean documentation reflecting the actual 3-repo GitHub org.
</objective>

<execution_context>
@/home/john/.claude/get-shit-done/workflows/execute-plan.md
@/home/john/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/30-repo-cleanup/30-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove stale repo references from CLAUDE.md</name>
  <files>CLAUDE.md</files>
  <action>
    Update CLAUDE.md with these specific changes:

    1. **Remove the "Archived Service Repos" section entirely** (lines ~108-122 containing the table with billing, device, identity, ingestion, infra repos and the note about trustedge-audit and trustedge-dashboard). Per user decision: "Remove the 'Archived Service Repos' section from CLAUDE.md entirely."

    2. **Add a brief org structure note** where the archived section was (or near the Architecture Overview), stating:
       ```
       ### GitHub Organization

       The TrustEdge-Labs GitHub org contains 3 repos:
       - **trustedge** — This monorepo: Rust workspace + SvelteKit dashboard
       - **trustedgelabs-website** — Product website
       - **shipsecure** — Separate product
       ```

    3. **Search CLAUDE.md for any remaining references** to the deleted repos (trustedge-billing-service, trustedge-device-service, trustedge-identity-service, trustedge-ingestion-service, trustedge-infra, trustedge-platform-api, trustedge-verify-core, trustedge-shared-libs, trustedge-dashboard, trustedge-audit, trustedgelabs-brand-kit) and remove or update them. The current note on line 122 about trustedge-dashboard being moved into web/dashboard/ should be removed since the archived section is going away entirely.

    Do NOT add emoji to any text in CLAUDE.md.
  </action>
  <verify>
    Run `grep -c 'trustedge-billing\|trustedge-device-service\|trustedge-identity\|trustedge-ingestion\|trustedge-infra\|trustedge-dashboard\|trustedge-audit\|trustedge-platform-api\|trustedge-verify-core\|trustedge-shared-libs\|trustedgelabs-brand-kit' CLAUDE.md` — should return 0.

    Verify "GitHub Organization" section exists with exactly 3 repos listed.
  </verify>
  <done>CLAUDE.md contains zero references to deleted repos and accurately describes the 3-repo org structure.</done>
</task>

<task type="auto">
  <name>Task 2: Scrub remaining docs for stale repo references</name>
  <files>DEPENDENCIES.md, .planning/STATE.md, .planning/REQUIREMENTS.md, .planning/PROJECT.md</files>
  <action>
    Search all .md files in the repo root and .planning/ directory for references to deleted repos. Update only files that contain stale references as if those repos still exist externally.

    **DEPENDENCIES.md** (line 34): Contains "Merges trustedge-verify-core and trustedge-platform-api into a single crate." This is historical context describing the origin of trustedge-platform. This is acceptable as-is because it explains WHERE the code came from, not WHERE it lives now. Leave it.

    **Source code comments** (2 matches in .rs files):
    - `crates/platform/tests/platform_integration.rs` line 11: "Migrated from trustedge-platform-api..." — This is a provenance comment. Leave it (historical context).
    - `crates/platform/tests/verify_integration.rs` line 11: "Migrated from trustedge-verify-core..." — Same. Leave it.

    **.planning/ files**: These are planning artifacts. References to deleted repos in PLAN.md, SUMMARY.md, VERIFICATION.md, CONTEXT.md files are historical records and should NOT be modified. Only update STATE.md, REQUIREMENTS.md, and PROJECT.md if they contain forward-looking references implying repos still exist.

    **STATE.md updates:**
    - Update "Current Position" to reflect Phase 30 in progress
    - Update "Resume at" to reflect documentation cleanup
    - Mark the trustedge-dashboard repo deletion concern as RESOLVED

    **REQUIREMENTS.md updates:**
    - Mark REPO-01 as complete (repos deleted)
    - Mark REPO-02 as complete (CLAUDE.md updated)
    - Mark REPO-03 as complete (documentation updated)

    **PROJECT.md**: Update if it contains forward-looking references implying external repos still exist. Line 128 says "trustedge-dashboard (29-file SvelteKit) deferred" — this is historical but may need context update since dashboard is now moved and repo deleted.

    Do NOT modify any files under `.planning/milestones/` or `.planning/phases/*/` (except STATE.md). These are historical records.
  </action>
  <verify>
    Run a broad search for stale repo references in non-planning docs:
    ```
    grep -rn 'trustedge-billing\|trustedge-device-service\|trustedge-identity\|trustedge-ingestion\|trustedge-infra' --include='*.md' --exclude-dir='.planning/milestones' --exclude-dir='.planning/phases' . | grep -v 'DEPENDENCIES.md'
    ```
    Should return 0 matches (only historical planning files and DEPENDENCIES.md provenance should reference them).

    Verify REQUIREMENTS.md shows all REPO-* requirements as complete.
  </verify>
  <done>All non-historical documentation is clean of stale repo references. REQUIREMENTS.md shows REPO-01, REPO-02, REPO-03 as complete.</done>
</task>

</tasks>

<verification>
1. `grep -rn 'trustedge-billing\|trustedge-device-service\|trustedge-identity-service\|trustedge-ingestion\|trustedge-infra' CLAUDE.md` returns no matches
2. `grep -c 'trustedge-dashboard' CLAUDE.md` returns 0 (or only the web/dashboard reference)
3. CLAUDE.md has a "GitHub Organization" section listing exactly 3 repos
4. REQUIREMENTS.md shows all REPO-* requirements checked off
</verification>

<success_criteria>
CLAUDE.md contains no references to deleted repos, accurately describes 3-repo org, and the "Archived Service Repos" section is removed. All documentation reflects the final state.
</success_criteria>

<output>
After completion, create `.planning/phases/30-repo-cleanup/30-02-SUMMARY.md`
</output>
